<section class="login-account">
    <h1 class="form__title">Login</h1>

    <form id="loginForm" class="form" action="/auth/login" method="POST">
        <fieldset class="form__fieldset">
            <label for="username" class="form__label">
                Username
                <span class="form__required">*</span>
            </label>
            <input type="text" autocomplete="username" class="form__input" name="username" id="username" required
                aria-required="true" aria-label="Username" />
        </fieldset>

        <fieldset class="form__fieldset">
            <label for="password" class="form__label">
                Password
                <span class="form__required">*</span>
            </label>
            <input type="password" autocomplete="current-password" class="form__input" name="password" id="password"
                required aria-required="true" aria-label="Password" />
            </div>
        </fieldset>

        <div class="form__group">
            <button type="submit" class="form__submit" name="loginButton" id="loginButton" aria-label="Sign In">
                Login
            </button>
            <% if (error) { %>
            <span id="error-message" role="alert" aria-label="<%= error %>"
                class="form__error-message"><%= error %></span>
            <% } %>
        </div>
    </form>

    <p class="form__footer-description">Don't have an account? <a href="/auth/register" class="form__link">Register</a>
    </p>
</section>
<script nonce="<%= nonce %>">
    document.addEventListener('DOMContentLoaded', () => {
        const formEl = document.getElementById("loginForm");
        const buttonEl = document.getElementById("loginButton");

        formEl.addEventListener('submit', function() {
            buttonEl.disabled = true;
            buttonEl.textContent = "Logging in...";
        });
    });
</script>